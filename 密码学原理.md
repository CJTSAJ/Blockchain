### 哈希
- 哈希是单向的，几乎不可能反算出输入值。输入空间足够大时可以认为不可逆。
- 哈希碰撞：H(x)=H(y) x不等于y 
- collison resistence：很难人为去进行哈希碰撞。
基于以上几点，哈希可用于加密。</br>
比特币中的哈希：puzzle friendly(只有不停地去试，作为工作量证明)，取一个随机数nonce与值拼接进行哈希。得到的哈希值需要落到指定的范围。挖矿很难，但验证很容易。

### 签名
- 对称加密：加密解密用同一个密钥，前提是有安全的通信方式可以把密钥传给另一个人。
- 非对称加密：私钥和公钥；私钥加密，公钥解密。公钥不用保密，私钥保密；可以解决密钥分发不方便问题。
</br></br>
在比特币中使用非对称加密进行电子签名，防止他人伪造。改动其中一个区块，其后所有的整条区块链的哈希值都会被修改，所以可以很好地防止篡改</br>
在比特币的设计中，一般先用哈希对整个区块进行哈希，然后再进行签名加密。


### 哈希指针
保存指针和一个区块的哈希值，哈希值可以检验区块是否被篡改。改动其中一个区块，其后所有的整条区块链的哈希值都会被修改，所以可以很好地防止篡改

### merkle Tree
叶子结点是数据块，中间都是哈希指针。哈希值从下往上一层层算上去。</br>
只需要记住根节点哈希值都能检测整棵树的篡改。</br>
Merkle proof：轻节点只保存根节点，服务器发来路径上的其它哈希值，则可以一路算到根节点进行对比，以此验证。哈希collison resistence的性质可以保证其安全性。

### 防止重复支付
加密文件不可以伪造，但是可以复制。</br>
可追溯性：每笔交易要说明币的来源，币的来源区块中记录的有支付者的公钥的哈希(防止假扮该支付者)。记账者收到交易记录和公钥，用该公钥进行哈希与来源公钥哈希进行对比防止“冒充”。</br>

### block header
- version
- hash of previous block header
- Merkle root header
- target：难度目标阈值，块头哈希需要小于等于该值
- nonce：随机数

### block body
- 交易列表

系统中大多数是轻节点，少数是全节点。

### 分布式系统
三大性质不可能共存，Paxos用于解决一致性
- Consistency：一致性,所有节点在同一时间的数据完全一致
- Availability：可用性，即服务一直可用，而且是正常响应时间。
- Partition tolerance：分区容错性，即分布式系统在遇到某节点或网络分区故障的时候，仍然能够对外提供满足一致性或可用性的服务。

sybil attack：女巫攻击，对于投票机制，恶意计算机不断的产生账户(公钥私钥)，当其恶意账户多余现存一半时则可以操控投票。</br>
比特币的解决方式：工作量证明，工作量证明成功后则获得记账权。并且对记账有奖励机制。

